ENV=dev
TIMEZONE=Asia/Dubai

# 数据库名称：trading-ci
# Postgres 中包含 '-' 的数据库名需要用双引号创建，例如：CREATE DATABASE "trading-ci";
DATABASE_URL=postgresql://user:pass@host:5432/trading-ci
REDIS_URL=redis://:pass@host:6379/0

REDIS_STREAM_GROUP=bot-group
REDIS_STREAM_CONSUMER=bot-consumer-1

BYBIT_API_KEY=YOUR_KEY
BYBIT_API_SECRET=YOUR_SECRET
BYBIT_BASE_URL=https://api.bybit.com
BYBIT_WS_PUBLIC_URL=wss://stream.bybit.com/v5/public/linear
BYBIT_WS_PRIVATE_URL=wss://stream.bybit.com/v5/private

# ===== marketdata（Phase 1）=====
MARKETDATA_SYMBOLS=BTCUSDT,ETHUSDT
MARKETDATA_TIMEFRAMES=15m,30m,1h,4h,8h,1d
MARKETDATA_ENABLE_REST_BACKFILL=true
MARKETDATA_BACKFILL_LIMIT=500

# ===== 策略/风控参数（默认值）=====
RISK_PCT=0.005
MAX_OPEN_POSITIONS_DEFAULT=3
MIN_CONFIRMATIONS=2
AUTO_TIMEFRAMES=1h,4h,1d
MONITOR_TIMEFRAMES=15m,30m,8h

ACCOUNT_KILL_SWITCH_ENABLED=false
DAILY_LOSS_LIMIT_PCT=0.03
ENABLE_SIGNAL_SCORING=false
ENABLE_MARKET_STATE=false
ENABLE_ORDER_RETRY=true


# ---------------- Execution ----------------
EXECUTION_MODE=paper
BYBIT_REST_BASE_URL=https://api.bybit.com
# 注意：不要在这里重复定义 BYBIT_API_KEY/BYBIT_API_SECRET（会覆盖上面的配置）。
# 若要实盘（LIVE）请在上面的 BYBIT_API_KEY/BYBIT_API_SECRET 中填写。
BYBIT_CATEGORY=linear
BYBIT_ACCOUNT_TYPE=UNIFIED
BYBIT_RECV_WINDOW=5000
BYBIT_POSITION_IDX=0

MAX_OPEN_POSITIONS=3
POSITION_COOLDOWN_MINUTES=30
ACCOUNT_KILL_SWITCH_ENABLED=false

RUNNER_TRAIL_MODE=ATR
RUNNER_ATR_PERIOD=14
RUNNER_ATR_MULT=2.0

ORDER_POLL_INTERVAL_SEC=1.0
ORDER_POLL_TIMEOUT_SEC=25.0

# ---------------- Notifier (Telegram, optional) ----------------
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Phase 5：信号评分为复盘字段，不需要额外配置


# ---------------- Phase 6: Daily drawdown circuit breaker ----------------
DAILY_DRAWDOWN_SOFT_PCT=2.0
DAILY_DRAWDOWN_HARD_PCT=3.0
RISK_MONITOR_INTERVAL_SEC=30.0


# ---------------- Stage 2: Marketdata gapfill ----------------
MARKETDATA_GAPFILL_ENABLED=true
MARKETDATA_GAPFILL_MAX_BARS=2000


# ---------------- Stage 3: Notifier retries ----------------
NOTIFIER_MAX_ATTEMPTS=5
NOTIFIER_RETRY_LOOP_INTERVAL_SEC=5


ACCOUNT_SNAPSHOT_INTERVAL_SEC=30
ALERT_STREAM_LAG_ENABLED=true
ALERT_TRADE_PLAN_LAG_MS=60000
ALERT_BAR_CLOSE_LAG_MS=120000

ADMIN_TOKEN=change_me
